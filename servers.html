<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Servidores donde eres administrador - Lyno</title>
  <link rel="stylesheet" href="styles.css"> 
  <link rel="icon" type="image/png" href="/favicon.png">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

 
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }

    body {
      min-height: 100vh;
      background-color: #0b0c17;
      color: var(--text, #ffffff);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

  
    #particle-canvas {
      position: fixed;
      top:0; left:0;
      width:100%;
      height:100%;
      z-index:0;
      pointer-events:none;
      mix-blend-mode:screen;
      opacity:0.8;
    }

    h2 {
      margin-bottom: 30px;
      font-size: 2rem;
      color: var(--accent-2, #00aeff);
      z-index:1;
      position: relative;
    }

   
    #server-list {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      width: 100%;
      z-index:1;
      position: relative;
    }

    .server-card {
      background: var(--glass, #0b0c17);
      border-radius: 14px;
      width: 180px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 0 8px 20px rgba(2,6,23,0.6);
      border: 1px solid rgba(0,145,255,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }

    .server-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 10px 25px rgba(0,145,255,0.3);
    }

    .server-icon {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      margin-bottom: 12px;
      background-color: #0b0c17;
      object-fit: cover;
      border: 2px solid var(--accent-1, #0095ff);
    }

    .server-name {
      color: var(--accent-1, #0095ff);
      font-weight: 700;
      font-size: 1.1rem;
      text-align: center;
      word-break: break-word;
    }

    @media screen and (max-width: 992px) {
      h2 { font-size: 1.7rem; }
      .server-card { width: 45%; }
    }

    @media screen and (max-width: 768px) {
      h2 { font-size: 1.5rem; }
      .server-card { width: 48%; }
    }

    @media screen and (max-width: 576px) {
      h2 { font-size: 1.3rem; }
      .server-card { width: 90%; }
    }
  </style>
</head>
<body>

<canvas id="particle-canvas" aria-hidden="true"></canvas>

<h2>Servidores donde eres administrador</h2>
<div id="server-list">Cargando...</div>

<script>
const token = new URLSearchParams(window.location.hash.substring(1)).get('access_token');

if (!token) {
  document.getElementById("server-list").innerText = "No se encontró token de acceso.";
} else {
  window.history.replaceState(null, null, window.location.pathname);

  fetch("https://discord.com/api/users/@me/guilds", {
    headers: { Authorization: `Bearer ${token}` }
  })
  .then(res => res.json())
  .then(data => {
    const list = document.getElementById("server-list");
    list.innerHTML = "";

    if (!Array.isArray(data)) {
      list.innerText = "Error al obtener los servidores.";
      return;
    }

    const adminServers = data.filter(g => (g.permissions & 0x8) === 0x8);

    if (adminServers.length === 0) {
      list.innerText = "No eres administrador en ningún servidor donde esté el bot.";
      return;
    }

    adminServers.forEach(g => {
      const iconUrl = g.icon
        ? `https://cdn.discordapp.com/icons/${g.id}/${g.icon}.png?size=128`
        : 'https://lynobot.wordpress.com/wp-content/uploads/2025/08/6d0ae64489762fcf1c31ed88bdd852a3.jpg';

      const div = document.createElement("div");
      div.className = "server-card";
      div.innerHTML = `
        <img class="server-icon" src="${iconUrl}" alt="Icono ${g.name}" />
        <div class="server-name">${g.name}</div>
      `;
      list.appendChild(div);
    });
  })
  .catch(err => {
    console.error(err);
    document.getElementById("server-list").innerText = "Error al cargar los servidores.";
  });
}

const canvas = document.getElementById('particle-canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const particles = [];
for (let i = 0; i < 80; i++) {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 2 + 1,
    dx: (Math.random() - 0.5) * 0.7,
    dy: (Math.random() - 0.5) * 0.7
  });
}

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  particles.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fillStyle = 'rgba(0,145,255,0.6)';
    ctx.fill();
    p.x += p.dx;
    p.y += p.dy;

    if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
    if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
  });
  requestAnimationFrame(animate);
}
animate();

window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>
